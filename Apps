<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HARITA ç¨Ÿè­°ãƒ»æ±ºè£ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Neutrals & Calm Harmony -->
    <!-- Background: #F9FAFB (Warm Gray 50) -->
    <!-- Primary Text: #1F2937 (Gray 800) -->
    <!-- Accent (Action): #4B5563 (Gray 600) / #10B981 (Emerald 500 for success) -->
    <!-- Secondary: #E5E7EB (Gray 200) -->
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #F9FAFB;
            color: #1F2937;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        .nav-item.active {
            background-color: #E5E7EB;
            color: #111827;
            border-left: 4px solid #4B5563;
        }
        .card {
            background-color: #FFFFFF;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        /* Custom scrollbar for checklist area if needed */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
    </style>

    <!-- Application Structure Plan: 
         - Layout: Sidebar navigation (collapsible on mobile) + Main Content Area.
         - Sections:
           1. Dashboard (Home): Immediate status check. Shows "Days until Deadline" gauge and current phase.
           2. Route Checker (Interactive Tool): Input amount/type -> Get logic result. Replaces complex tables.
           3. Monthly Schedule (Visual): Gantt chart of the standard flow.
           4. Rulebook (Reference): Accordion/Tabs for static detailed rules (Budget, Systems).
           5. Checklist (Action): Interactive checkboxes for pre-submission verification.
         - Rationale: Users come with a specific intent ("Can I buy this?", "When is the deadline?"). The structure prioritizes these tasks over reading the manual linearly.
    -->

    <!-- Visualization & Content Choices:
         - Deadline Gauge (Chart.js Doughnut): VISUALIZES time urgency. Goal: Inform/Motivate. Interaction: None (updates on load). Justification: A simple date is easy to miss; a filling ring creates awareness.
         - Monthly Flow (Chart.js Bar/Gantt): VISUALIZES the process over time. Goal: Organize/Plan. Interaction: Tooltips with details. Justification: Shows overlaps (Preparation vs Application) better than text list.
         - Route Checker (DOM Manipulation): LOGIC processing. Goal: Inform/Clarify. Interaction: Form input. Justification: The matrix is complex; a calculator removes error.
         - NO SVG/Mermaid confirmed. Using HTML/CSS shapes and Unicode.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Mobile Header -->
    <div class="md:hidden fixed w-full bg-white z-50 border-b border-gray-200 flex justify-between items-center p-4">
        <h1 class="text-lg font-bold text-gray-800">HARITA æ±ºè£ãƒŠãƒ“</h1>
        <button id="mobile-menu-btn" class="text-gray-600 focus:outline-none">
            <span class="text-2xl">â˜°</span>
        </button>
    </div>

    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="transform -translate-x-full md:translate-x-0 transition-transform duration-300 fixed md:relative z-40 w-64 h-full bg-white border-r border-gray-200 flex flex-col pt-16 md:pt-0">
        <div class="p-6 border-b border-gray-100 hidden md:block">
            <h1 class="text-xl font-bold text-gray-800 tracking-tight">HARITA<br><span class="text-sm font-normal text-gray-500">ç¨Ÿè­°ãƒ»æ±ºè£é‹ç”¨ãƒŠãƒ“</span></h1>
            <p class="text-xs text-gray-400 mt-2">DXæ‹…å½“ç‰ˆ Ver.2026</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1">
                <li>
                    <button onclick="showSection('dashboard')" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors active" id="nav-dashboard">
                        ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                    </button>
                </li>
                <li>
                    <button onclick="showSection('route-checker')" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors" id="nav-route-checker">
                        âš–ï¸ æ‰¿èªãƒ«ãƒ¼ãƒˆåˆ¤å®š
                    </button>
                </li>
                <li>
                    <button onclick="showSection('schedule')" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors" id="nav-schedule">
                        ğŸ“… æœˆæ¬¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
                    </button>
                </li>
                <li>
                    <button onclick="showSection('rules')" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors" id="nav-rules">
                        ğŸ“š é‡è¦ãƒ«ãƒ¼ãƒ«ãƒ»äºˆç®—
                    </button>
                </li>
                <li>
                    <button onclick="showSection('checklist')" class="nav-item w-full text-left px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors" id="nav-checklist">
                        âœ… ç”³è«‹å‰ãƒã‚§ãƒƒã‚¯
                    </button>
                </li>
            </ul>
        </nav>

        <div class="p-4 border-t border-gray-100 bg-gray-50">
            <div class="text-xs text-gray-500 text-center">
                <p>æ¬¡ã®æ±ºè£ä¼šè­°ã¾ã§</p>
                <p id="sidebar-countdown" class="text-lg font-bold text-emerald-600 mt-1">--æ—¥</p>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 h-full overflow-y-auto bg-gray-50 p-4 md:p-8 pt-20 md:pt-8 w-full" id="main-content">
        
        <!-- SECTION: DASHBOARD -->
        <section id="dashboard" class="space-y-6 max-w-5xl mx-auto">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
                <p class="text-gray-600 mt-2">
                    ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™ã€‚ã“ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯ã€Œæ¯æœˆç¬¬4æœˆæ›œæ—¥ã€ã®çµŒå–¶ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã‚´ãƒ¼ãƒ«ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Deadline Widget -->
                <div class="card p-6 flex flex-col items-center justify-center">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 w-full text-left border-l-4 border-emerald-500 pl-3">æ±ºè£ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</h3>
                    <div class="chart-container h-64 w-full flex justify-center items-center">
                        <canvas id="deadlineChart"></canvas>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-500">æ¬¡å›ã®çµŒå–¶ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆæ±ºè£æ—¥ï¼‰</p>
                        <p id="next-meeting-date" class="text-xl font-bold text-gray-800">YYYY/MM/DD</p>
                    </div>
                </div>

                <!-- Action Required Widget -->
                <div class="card p-6">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 border-l-4 border-blue-500 pl-3">ç¾åœ¨ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŒ‡é‡</h3>
                    <div id="current-action-display" class="bg-blue-50 rounded-lg p-6 text-center h-64 flex flex-col justify-center items-center">
                        <span class="text-4xl mb-3" id="action-icon">ğŸ¤”</span>
                        <h4 class="text-xl font-bold text-blue-800 mb-2" id="action-title">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèªä¸­...</h4>
                        <p class="text-blue-600 text-sm" id="action-desc">èª­ã¿è¾¼ã¿ä¸­</p>
                    </div>
                </div>
            </div>

            <!-- Quick Stats / Shortcuts -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                <button onclick="showSection('route-checker')" class="card p-4 hover:bg-gray-50 text-left transition group">
                    <span class="block text-2xl mb-2 group-hover:scale-110 transition-transform origin-left">âš–ï¸</span>
                    <span class="block font-bold text-gray-700">ã„ãã‚‰ã¾ã§èª²é•·æ‰¿èªï¼Ÿ</span>
                    <span class="text-xs text-gray-500">é‡‘é¡ã«ã‚ˆã‚‹æ¨©é™ã‚’ç¢ºèª</span>
                </button>
                <button onclick="showSection('rules')" class="card p-4 hover:bg-gray-50 text-left transition group">
                    <span class="block text-2xl mb-2 group-hover:scale-110 transition-transform origin-left">ğŸ“</span>
                    <span class="block font-bold text-gray-700">ã‚·ã‚¹ãƒ†ãƒ è²»ç”¨ã®æŒ‰åˆ†</span>
                    <span class="text-xs text-gray-500">å…¨ç¤¾è²»ç”¨ã®ãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèª</span>
                </button>
                <button onclick="showSection('checklist')" class="card p-4 hover:bg-gray-50 text-left transition group">
                    <span class="block text-2xl mb-2 group-hover:scale-110 transition-transform origin-left">âœ…</span>
                    <span class="block font-bold text-gray-700">ç”³è«‹æ¼ã‚Œã‚’é˜²ã</span>
                    <span class="text-xs text-gray-500">æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</span>
                </button>
            </div>
        </section>

        <!-- SECTION: ROUTE CHECKER -->
        <section id="route-checker" class="hidden space-y-6 max-w-4xl mx-auto">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800">æ‰¿èªãƒ«ãƒ¼ãƒˆåˆ¤å®šãƒ„ãƒ¼ãƒ«</h2>
                <p class="text-gray-600 mt-2">
                    é‡‘é¡ã¨ç”³è«‹ã‚¿ã‚¤ãƒ—ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å¿…è¦ãªæ‰¿èªãƒ«ãƒ¼ãƒˆã€ç”³è«‹æ›¸ã®ç¨®é¡ã€æ·»ä»˜æ›¸é¡ã®æ¡ä»¶ã‚’è‡ªå‹•åˆ¤å®šã—ã¾ã™ã€‚
                    <br><span class="text-xs text-gray-400">â€»ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥æœ¬éƒ¨ã®ç‰¹ä¾‹ï¼ˆCLå…¼å‹™ï¼‰ã«å¯¾å¿œæ¸ˆã¿ã€‚</span>
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Inputs -->
                <div class="card p-6 space-y-6 h-fit">
                    <h3 class="font-bold text-gray-700 border-b pb-2">æ¡ä»¶å…¥åŠ›</h3>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">äºˆå®šé‡‘é¡ï¼ˆç¨æŠœï¼‰</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2 text-gray-500">Â¥</span>
                            <input type="number" id="input-amount" class="w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="ä¾‹: 150000" oninput="calculateRoute()">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ¡ˆä»¶ã‚«ãƒ†ã‚´ãƒª</label>
                        <select id="input-category" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" onchange="calculateRoute()">
                            <option value="general">ä¸€èˆ¬ï¼ˆç‰©å“è³¼å…¥ãƒ»å¥‘ç´„ç­‰ï¼‰</option>
                            <option value="vehicle">è»Šä¸¡ãƒ»é‡æ©Ÿä¿®ç¹•</option>
                            <option value="consumable">æ¶ˆè€—å“ä¸€è¦§ã‹ã‚‰ã®è³¼å…¥</option>
                        </select>
                    </div>

                    <div class="bg-yellow-50 p-4 rounded-md text-sm text-yellow-800">
                        <strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> 50ä¸‡å††ä»¥ä¸Šã®å ´åˆã¯ç›¸è¦‹ç©ã‚‚ã‚ŠãŒå¿…é ˆã«ãªã‚Šã¾ã™ã€‚
                    </div>
                </div>

                <!-- Results -->
                <div class="card p-6 bg-gray-800 text-white relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10 text-6xl font-serif">âš–ï¸</div>
                    <h3 class="font-bold text-gray-200 border-b border-gray-600 pb-2 mb-4">åˆ¤å®šçµæœ</h3>

                    <div id="result-placeholder" class="text-center py-10 text-gray-400">
                        å·¦å´ã®ãƒ•ã‚©ãƒ¼ãƒ ã«é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                    </div>

                    <div id="result-content" class="hidden space-y-4">
                        <div>
                            <p class="text-xs text-gray-400">ç”³è«‹æ›¸ã®ç¨®é¡</p>
                            <p class="text-xl font-bold text-emerald-400" id="res-doc-type">---</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400">æœ€çµ‚æ‰¿èªè€…</p>
                            <p class="text-2xl font-bold text-white" id="res-approver">---</p>
                        </div>
                        <div class="bg-gray-700 rounded p-3 mt-4">
                            <p class="text-xs text-gray-400 mb-1">å¿…é ˆæ¡ä»¶ãƒ»æ·»ä»˜æ›¸é¡</p>
                            <ul class="text-sm list-disc pl-4 space-y-1 text-gray-200" id="res-requirements">
                                <!-- Dynamic list -->
                            </ul>
                        </div>
                        <div id="res-alert" class="hidden bg-red-900/50 border border-red-500 text-red-100 p-3 rounded text-sm">
                            <!-- Alert content -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: SCHEDULE -->
        <section id="schedule" class="hidden space-y-6 max-w-5xl mx-auto">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800">æœˆæ¬¡æ¨™æº–ãƒ•ãƒ­ãƒ¼</h2>
                <p class="text-gray-600 mt-2">
                    æ¯æœˆç¬¬4æœˆæ›œæ—¥ã®æ±ºè£ã«å‘ã‘ãŸæ¨™æº–çš„ãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§ã™ã€‚ç”³è«‹é…ã‚Œã¯æ±ºè£ã®ç¿ŒæœˆæŒã¡è¶Šã—ï¼ˆï¼æ¥­å‹™é…å»¶ï¼‰ã«ç›´çµã™ã‚‹ãŸã‚ã€å¿…ãšä¸­æ—¬ã¾ã§ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚
                </p>
            </div>

            <div class="card p-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-4 border-l-4 border-indigo-500 pl-3">æœˆé–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆ1æ—¥ï½31æ—¥ï¼‰</h3>
                <p class="text-sm text-gray-500 mb-4">æ¨ªè»¸ã¯æ—¥ä»˜ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ç¾åœ¨ã®ä½ç½®ã‚’æŠŠæ¡ã—ã€é…ã‚Œã¦ã„ãªã„ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
                <div class="chart-container w-full h-80">
                    <canvas id="scheduleChart"></canvas>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                <div class="bg-white p-4 rounded-lg border-l-4 border-gray-400 shadow-sm">
                    <h4 class="font-bold text-gray-700">1. æº–å‚™ãƒ•ã‚§ãƒ¼ã‚º</h4>
                    <p class="text-xs text-gray-500 mt-1">ï½æ¯æœˆä¸­æ—¬ã¾ã§</p>
                    <p class="text-sm mt-2 text-gray-600">ç¨Ÿè­°ç®¡ç†ä¸€è¦§ã¸ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã€‚äºˆç®—å†…ã§ã‚ã‚‹ã‹ã®ç¢ºèªã€‚æ¥­è€…é¸å®šã¨è¦‹ç©ã‚‚ã‚Šå–å¾—ã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-lg border-l-4 border-blue-500 shadow-sm">
                    <h4 class="font-bold text-gray-700">2. ç”³è«‹ãƒ•ã‚§ãƒ¼ã‚º</h4>
                    <p class="text-xs text-gray-500 mt-1">æ¯æœˆ10æ—¥ï½15æ—¥æ¨å¥¨</p>
                    <p class="text-sm mt-2 text-gray-600">X-Pointã§ã®ã‚·ã‚¹ãƒ†ãƒ ç”³è«‹ã€‚ä¸Šé•·æ‰¿èªã‚’çµŒã¦ã€ä¼šè­°è³‡æ–™ä½œæˆãƒ•ã‚§ãƒ¼ã‚ºã¸ã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-lg border-l-4 border-red-500 shadow-sm">
                    <h4 class="font-bold text-gray-700">3. æ±ºè£ãƒ•ã‚§ãƒ¼ã‚º</h4>
                    <p class="text-xs text-gray-500 mt-1">ç¬¬4æœˆæ›œæ—¥</p>
                    <p class="text-sm mt-2 text-gray-600">çµŒå–¶ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã®å¯©è­°ãƒ»æ±ºè£ã€‚ã“ã“ã‚’éãã‚‹ã¨ç¿Œæœˆæ‰±ã„ã«ãªã‚Šã¾ã™ã€‚</p>
                </div>
            </div>
        </section>

        <!-- SECTION: RULES -->
        <section id="rules" class="hidden space-y-6 max-w-4xl mx-auto">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800">é‡è¦ãƒ«ãƒ¼ãƒ«ãƒ»ãƒŠãƒ¬ãƒƒã‚¸</h2>
                <p class="text-gray-600 mt-2">
                    å…¨ç¤¾ã‚·ã‚¹ãƒ†ãƒ è²»ç”¨ã®æŒ‰åˆ†ã‚„ã€å¹´æ¬¡äºˆç®—ç­–å®šãªã©ã€DXæ‹…å½“è€…ãŒæŠ¼ã•ãˆã¦ãŠãã¹ãç‰¹æ®Šãƒ«ãƒ¼ãƒ«ã§ã™ã€‚
                </p>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-1 border-b border-gray-300 mb-6 overflow-x-auto">
                <button onclick="openTab('tab-budget')" class="tab-btn px-4 py-2 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 focus:outline-none active-tab" data-target="tab-budget">å¹´æ¬¡äºˆç®—ãƒ»ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆ</button>
                <button onclick="openTab('tab-allocation')" class="tab-btn px-4 py-2 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 focus:outline-none" data-target="tab-allocation">è²»ç”¨æŒ‰åˆ†ãƒ»ç§‘ç›®å†…è¨³</button>
                <button onclick="openTab('tab-assets')" class="tab-btn px-4 py-2 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:text-gray-800 focus:outline-none" data-target="tab-assets">å›ºå®šè³‡ç”£ãƒ»å¤‰æ›´å‡¦ç†</button>
            </div>

            <!-- Tab Content: Budget -->
            <div id="tab-budget" class="tab-content block space-y-4 animate-fade-in">
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ“… æ¥æœŸäºˆç®—ã®ç­–å®šï¼ˆæ¯å¹´10æœˆï½11æœˆï¼‰</h3>
                    <div class="p-4 bg-orange-50 rounded-lg border border-orange-100 mb-4">
                        <p class="text-orange-800 font-medium">âš ï¸ DXæ‹…å½“ã®æœ€é‡è¦ãƒŸãƒƒã‚·ãƒ§ãƒ³</p>
                        <p class="text-sm text-orange-700 mt-1">ç¿Œå¹´åº¦ã®ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚³ã‚¹ãƒˆã¯ã€ã“ã®æ™‚æœŸã«å„éƒ¨ç½²ã§ã¾ã¨ã‚ã€äº‹å‰ã«æå‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã“ã§ç”³è«‹æ¼ã‚ŒãŒã‚ã‚‹ã¨ã€ç¿Œå¹´ã®æ”¯æ‰•ã„ãŒå›°é›£ã«ãªã‚Šã¾ã™ã€‚</p>
                    </div>
                    <ul class="list-disc pl-5 space-y-2 text-gray-700 text-sm">
                        <li><strong>å¯¾è±¡çµŒè²»:</strong> ã‚µãƒ¼ãƒãƒ¼è²»ç”¨ã€SaaSãƒ©ã‚¤ã‚»ãƒ³ã‚¹è²»ã€ä¿å®ˆå¥‘ç´„è²»ãªã©ç¶™ç¶šçš„ã«ç™ºç”Ÿã™ã‚‹ã‚‚ã®ã€‚</li>
                        <li><strong>å¥‘ç´„æœŸé–“åˆ¥å¯¾å¿œ:</strong>
                            <ul class="list-circle pl-5 mt-1 text-gray-500">
                                <li>å¹´é–“å¥‘ç´„: å¥‘ç´„æ›¸ãƒ»å¹´é–“è¦‹ç©æ›¸ã‚’æ·»ä»˜</li>
                                <li>æœˆé¡å›ºå®š: 1ãƒ¶æœˆåˆ†ã®è¦‹ç©æ›¸ã¾ãŸã¯å®Ÿç¸¾æ ¹æ‹ </li>
                                <li>æœˆé¡å¤‰å‹•: å˜ä¾¡è¡¨ã‚„å–å¼•å®Ÿç¸¾ãƒªã‚¹ãƒˆç­‰ã®æ ¹æ‹ </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Tab Content: Allocation -->
            <div id="tab-allocation" class="tab-content hidden space-y-4 animate-fade-in">
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ“Š å…¨ç¤¾è²»ç”¨ã®éƒ¨ç½²é–“æŒ‰åˆ†</h3>
                    <p class="text-gray-600 text-sm mb-4">
                        å…¨ç¤¾ã§åˆ©ç”¨ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã‚¦ã‚§ã‚¢ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚½ãƒ•ãƒˆç­‰ï¼‰ã¯ã€å°å…¥ä¸»ç®¡éƒ¨ç½²ï¼ˆDXæ‹…å½“ï¼‰ãŒè²»ç”¨ã‚’è² æ‹…ã™ã‚‹ã®ã§ã¯ãªãã€åˆ©ç”¨éƒ¨ç½²ã”ã¨ã«çµŒè²»ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded border">
                            <h4 class="font-bold text-gray-700 mb-2">å¿…é ˆãƒ„ãƒ¼ãƒ«: ã€Œç§‘ç›®å†…è¨³ã€ã‚·ãƒ¼ãƒˆ</h4>
                            <p class="text-sm text-gray-600">äº‹å‰ã«äºˆå®šã—ã¦ã„ã‚‹è²»ç”¨ã¯ã€å¿…ãšã€Œç§‘ç›®å†…è¨³ã€ã«è¨˜è¼‰ã—ã€çµŒç†ãƒ»è²¡å‹™éƒ¨é–€ã¨é€£æºã—ã¦ãã ã•ã„ã€‚</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded border">
                            <h4 class="font-bold text-gray-700 mb-2">æŒ‰åˆ†åŸºæº–ã®æ˜ç¢ºåŒ–</h4>
                            <p class="text-sm text-gray-600">IDæ•°ãƒ™ãƒ¼ã‚¹ã€PCå°æ•°ãƒ™ãƒ¼ã‚¹ãªã©ã€å…¬å¹³ãªåŸºæº–ã‚’è¨­ã‘ã¦èª¬æ˜ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>

             <!-- Tab Content: Assets & Changes -->
             <div id="tab-assets" class="tab-content hidden space-y-4 animate-fade-in">
                <div class="card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ”„ ç™ºæ³¨å…ˆãƒ»é‡‘é¡ã®å¤‰æ›´</h3>
                    <p class="text-sm text-gray-600 mb-4">æ‰¿èªå¾Œã«æ¡ä»¶ãŒå¤‰ã‚ã£ãŸå ´åˆã€å‹æ‰‹ã«é€²ã‚ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚</p>
                    
                    <table class="w-full text-sm text-left border-collapse">
                        <thead class="bg-gray-100 text-gray-700">
                            <tr>
                                <th class="p-2 border">çŠ¶æ³</th>
                                <th class="p-2 border">å¯¾å¿œ</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-600">
                            <tr>
                                <td class="p-2 border">10%æœªæº€ ã‹ã¤ å¢—æ¸›10ä¸‡å††æœªæº€</td>
                                <td class="p-2 border">X-Pointã§é‡‘é¡å¢—æ¸›åˆ†ã‚’è¿½åŠ å…¥åŠ›ï¼ˆè¦‹ç©ãƒ»è«‹æ±‚æ›¸æ·»ä»˜ï¼‰</td>
                            </tr>
                            <tr>
                                <td class="p-2 border">ä¸Šè¨˜ä»¥å¤–ï¼ˆå¤§ããªå¤‰æ›´ï¼‰</td>
                                <td class="p-2 border font-bold text-red-600">è¿½åŠ ç¨Ÿè­°ã¾ãŸã¯ä¿®æ­£ç¨Ÿè­°ã‚’å†æå‡º</td>
                            </tr>
                            <tr>
                                <td class="p-2 border">ç™ºæ³¨å…ˆã®å¤‰æ›´</td>
                                <td class="p-2 border">X-Pointç·¨é›†ã€ã‚³ãƒ¡ãƒ³ãƒˆã«çµŒç·¯è¨˜è¼‰ã€è²¡å‹™ã¸é€£çµ¡</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="text-xl font-bold text-gray-800 mt-6 mb-3">ğŸ­ å›ºå®šè³‡ç”£ï¼ˆä¿®ç†ãƒ»å…¥æ›¿ï¼‰</h3>
                    <div class="text-sm text-gray-600 space-y-2">
                        <p><span class="font-bold">ä¿®ç†ãƒ»å…¥æ›¿:</span> å¯¾è±¡ã®ã€Œå›ºå®šè³‡ç”£ç•ªå·ã€ã‚’å¿…ãšè¨˜è¼‰ã€‚å»ƒæ£„äºˆå®šãŒã‚ã‚‹å ´åˆã‚‚æ˜è¨˜ã€‚</p>
                        <p><span class="font-bold">æ–°è¦å–å¾—:</span> è¨­ç½®å ´æ‰€ï¼ˆæ‹ ç‚¹ãƒ»ã‚¨ãƒªã‚¢ãƒ»å»ºå±‹ï¼‰ã‚’æ˜ç¢ºã«ã—ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå›³ã‚’æ·»ä»˜ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: CHECKLIST -->
        <section id="checklist" class="hidden space-y-6 max-w-4xl mx-auto pb-20">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ç”³è«‹å‰æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h2>
                <p class="text-gray-600 mt-2">
                    ã€Œã†ã£ã‹ã‚Šã€ã«ã‚ˆã‚‹å·®æˆ»ã—ã‚’é˜²ããŸã‚ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã™ã€‚å…¨ã¦ã«ãƒã‚§ãƒƒã‚¯ãŒå…¥ã‚‹ã¾ã§ç”³è«‹ã—ãªã„ã§ãã ã•ã„ã€‚
                </p>
            </div>

            <div class="card bg-white overflow-hidden">
                <div class="p-6 bg-gray-800 text-white flex justify-between items-center">
                    <h3 class="text-lg font-bold">Pre-Flight Check</h3>
                    <span id="check-progress" class="text-sm font-mono bg-gray-700 px-2 py-1 rounded">0/6 Completed</span>
                </div>
                
                <div class="p-6 space-y-4">
                    <label class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded cursor-pointer transition">
                        <input type="checkbox" class="task-check w-5 h-5 text-emerald-600 mt-1 focus:ring-emerald-500 border-gray-300 rounded" onchange="updateProgress()">
                        <div>
                            <span class="font-bold text-gray-800 block">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèª</span>
                            <span class="text-sm text-gray-500">ç¾åœ¨ã¯ç¬¬4æœˆæ›œæ—¥ã®å‰ã§ã™ã‹ï¼Ÿä¸­æ—¬ã¾ã§ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</span>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded cursor-pointer transition">
                        <input type="checkbox" class="task-check w-5 h-5 text-emerald-600 mt-1 focus:ring-emerald-500 border-gray-300 rounded" onchange="updateProgress()">
                        <div>
                            <span class="font-bold text-gray-800 block">ç¨Ÿè­°ç®¡ç†ä¸€è¦§ã¸ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼</span>
                            <span class="text-sm text-gray-500">ã€Œç¨Ÿè­°ç®¡ç†ä¸€è¦§ã€ã¸ã®è¨˜è¼‰ã¯æ¸ˆã‚“ã§ã„ã¾ã™ã‹ï¼Ÿã“ã‚ŒãŒãªã„ã¨ä¼šè­°ã«ä¸ŠãŒã‚Šã¾ã›ã‚“ã€‚</span>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded cursor-pointer transition">
                        <input type="checkbox" class="task-check w-5 h-5 text-emerald-600 mt-1 focus:ring-emerald-500 border-gray-300 rounded" onchange="updateProgress()">
                        <div>
                            <span class="font-bold text-gray-800 block">äºˆç®—ã®ç¢ºèª</span>
                            <span class="text-sm text-gray-500">ä»Šå¹´åº¦ã®äºˆç®—ï¼ˆã¾ãŸã¯10æœˆã«ç”³è«‹ã—ãŸæ¥æœŸäºˆç®—ï¼‰ã«å«ã¾ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ</span>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded cursor-pointer transition">
                        <input type="checkbox" class="task-check w-5 h-5 text-emerald-600 mt-1 focus:ring-emerald-500 border-gray-300 rounded" onchange="updateProgress()">
                        <div>
                            <span class="font-bold text-gray-800 block">è¦‹ç©æ›¸ã®ä¸å‚™ãªã—</span>
                            <span class="text-sm text-gray-500">å¿…é ˆã§ã™ã€‚50ä¸‡å††ä»¥ä¸Šã®å ´åˆã¯ç›¸è¦‹ç©ã‚‚ã‚Šï¼ˆã¾ãŸã¯ç†ç”±æ›¸ï¼‰ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ</span>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded cursor-pointer transition">
                        <input type="checkbox" class="task-check w-5 h-5 text-emerald-600 mt-1 focus:ring-emerald-500 border-gray-300 rounded" onchange="updateProgress()">
                        <div>
                            <span class="font-bold text-gray-800 block">è²»ç”¨æŒ‰åˆ†ã®æ˜è¨˜</span>
                            <span class="text-sm text-gray-500">å…¨ç¤¾ã‚·ã‚¹ãƒ†ãƒ ã®å ´åˆã€åˆ©ç”¨éƒ¨ç½²ã¸ã®æŒ‰åˆ†ã¯ã€Œç§‘ç›®å†…è¨³ã€ã«è¨˜è¼‰ã—ã¾ã—ãŸã‹ï¼Ÿ</span>
                        </div>
                    </label>

                    <label class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded cursor-pointer transition">
                        <input type="checkbox" class="task-check w-5 h-5 text-emerald-600 mt-1 focus:ring-emerald-500 border-gray-300 rounded" onchange="updateProgress()">
                        <div>
                            <span class="font-bold text-gray-800 block">äº‹å‰ç›¸è«‡ï¼ˆäº‹å¾Œç¨Ÿè­°ã®å ´åˆï¼‰</span>
                            <span class="text-sm text-gray-500">ä¸‡ãŒä¸€äº‹å¾Œç¨Ÿè­°ã«ãªã‚‹å ´åˆã€ä¸Šé•·ã¸äº‹å‰ç›¸è«‡æ¸ˆã§ã™ã‹ï¼Ÿï¼ˆåŸå‰‡2å–¶æ¥­æ—¥ä»¥å†…ï¼‰</span>
                        </div>
                    </label>
                </div>

                <div id="check-success" class="hidden bg-emerald-100 p-4 text-center text-emerald-800 font-bold">
                    æº–å‚™å®Œäº†ã§ã™ï¼X-Pointã§ç”³è«‹ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚ğŸš€
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- State Management ---
        let currentSection = 'dashboard';
        
        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initDeadline();
            initCharts();
            setupMobileMenu();
        });

        // --- Navigation Logic ---
        function showSection(sectionId) {
            // Hide all sections
            const sections = ['dashboard', 'route-checker', 'schedule', 'rules', 'checklist'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
                document.getElementById(`nav-${id}`).classList.remove('active', 'border-l-4', 'border-gray-600', 'bg-gray-100');
            });

            // Show target section
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(`nav-${sectionId}`).classList.add('active');

            // Close mobile menu if open
            const sidebar = document.getElementById('sidebar');
            if (!sidebar.classList.contains('-translate-x-full') && window.innerWidth < 768) {
                sidebar.classList.add('-translate-x-full');
            }
        }

        // --- Tab Logic ---
        function openTab(tabId) {
            // Hide all tabs content
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // Remove active style from buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('text-gray-800', 'border-gray-600');
                btn.classList.add('text-gray-600', 'border-transparent');
            });

            // Show target
            document.getElementById(tabId).classList.remove('hidden');
            // Add active style to button
            const btn = document.querySelector(`button[data-target="${tabId}"]`);
            btn.classList.remove('text-gray-600', 'border-transparent');
            btn.classList.add('text-gray-800', 'border-gray-600');
        }

        // --- Mobile Menu ---
        function setupMobileMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const sidebar = document.getElementById('sidebar');
            btn.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
            });
        }

        // --- Logic: Deadline Calculation (4th Monday) ---
        function getNext4thMonday() {
            const today = new Date();
            let year = today.getFullYear();
            let month = today.getMonth(); // 0-indexed
            
            // Function to find 4th Monday of a given year/month
            function find4thMonday(y, m) {
                let d = new Date(y, m, 1);
                let mondays = 0;
                while (d.getMonth() === m) {
                    if (d.getDay() === 1) { // Monday
                        mondays++;
                        if (mondays === 4) return d;
                    }
                    d.setDate(d.getDate() + 1);
                }
                return null;
            }

            let candidate = find4thMonday(year, month);
            
            // If today is past this month's 4th Monday, get next month's
            if (candidate && today > candidate) {
                if (month === 11) { year++; month = 0; }
                else { month++; }
                candidate = find4thMonday(year, month);
            }
            
            // If holiday check needed (generic simplified check: if candidate is holiday, next day)
            // For simplicity in this demo, we assume the calculated date is the target.
            return candidate;
        }

        function initDeadline() {
            const today = new Date();
            const deadline = getNext4thMonday();
            
            // Format Date
            const formattedDate = `${deadline.getFullYear()}/${deadline.getMonth() + 1}/${deadline.getDate()}`;
            document.getElementById('next-meeting-date').innerText = formattedDate;

            // Diff Days
            const diffTime = Math.abs(deadline - today);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            document.getElementById('sidebar-countdown').innerText = `${diffDays}æ—¥`;

            // Update Action Text based on date
            const dayOfMonth = today.getDate();
            const actionTitle = document.getElementById('action-title');
            const actionDesc = document.getElementById('action-desc');
            const actionIcon = document.getElementById('action-icon');

            if (dayOfMonth <= 10) {
                actionTitle.innerText = "æº–å‚™ãƒ•ã‚§ãƒ¼ã‚º";
                actionDesc.innerText = "ç¨Ÿè­°ç®¡ç†ä¸€è¦§ã¸ã®è¨˜è¼‰ã¨è¦‹ç©å–å¾—ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚";
                actionIcon.innerText = "ğŸ“";
            } else if (dayOfMonth <= 15) {
                actionTitle.innerText = "ç”³è«‹ãƒ•ã‚§ãƒ¼ã‚º (æ¨å¥¨)";
                actionDesc.innerText = "X-Pointã§ã®ç”³è«‹ã‚’è¡Œã†é‡è¦ãªæœŸé–“ã§ã™ã€‚";
                actionIcon.innerText = "ğŸš€";
            } else if (today < deadline) {
                actionTitle.innerText = "æ±ºè£æº–å‚™ä¸­";
                actionDesc.innerText = "ä¼šè­°è³‡æ–™ã®æº–å‚™æœŸé–“ã§ã™ã€‚æ‰¿èªãƒ«ãƒ¼ãƒˆã®ç¢ºèªã‚’ã€‚";
                actionIcon.innerText = "ğŸ“‹";
            } else {
                actionTitle.innerText = "æ±ºè£å½“æ—¥/äº‹å¾Œ";
                actionDesc.innerText = "æœ¬æ—¥ãŒæ±ºè£æ—¥ã€ã¾ãŸã¯ä»Šæœˆã®å—ä»˜ã¯çµ‚äº†ã—ã¾ã—ãŸã€‚";
                actionIcon.innerText = "ğŸ";
            }

            return { diffDays, totalDays: 30 }; // Simplified total for chart
        }

        // --- Logic: Route Checker ---
        function calculateRoute() {
            const amount = parseInt(document.getElementById('input-amount').value) || 0;
            const category = document.getElementById('input-category').value;
            
            const resultPlaceholder = document.getElementById('result-placeholder');
            const resultContent = document.getElementById('result-content');
            const resDocType = document.getElementById('res-doc-type');
            const resApprover = document.getElementById('res-approver');
            const resRequirements = document.getElementById('res-requirements');
            const resAlert = document.getElementById('res-alert');

            if (amount === 0) {
                resultPlaceholder.classList.remove('hidden');
                resultContent.classList.add('hidden');
                return;
            }

            resultPlaceholder.classList.add('hidden');
            resultContent.classList.remove('hidden');
            resAlert.classList.add('hidden');
            resRequirements.innerHTML = ''; // Clear

            // Base Logic
            let docType = "";
            let approver = "";
            let reqs = [];

            // Doc Type Logic
            if (amount < 100000 && category !== 'consumable') {
                docType = "èª¿é”ç”³è«‹æ›¸";
            } else {
                docType = "ç¨Ÿè­°æ›¸";
            }

            // Approver Logic (Innovation Strategy HQ Special Rule: CL is Director)
            if (category === 'vehicle' && amount < 1000000) {
                // Special Vehicle Rule
                approver = "å„æ‹…å½“æœ¬éƒ¨é•·";
                reqs.push("å›ºå®šè³‡ç”£ç•ªå·ã®è¨˜è¼‰å¿…é ˆ");
                reqs.push("ä¿®ç†ãƒ»å…¥æ›¿ã®å ´åˆã¯äº‹å‰ã®ç”»åƒæ·»ä»˜");
            } else {
                // Standard Flow
                if (amount < 200000) {
                    approver = "å–ç· å½¹ (CLå…¼å‹™)";
                } else {
                    approver = "å½¹å“¡æ±ºè£ (çµŒå–¶MTGæ‰¿èª)";
                    reqs.push("çµŒå–¶ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã®æ‰¿èªãŒå¿…è¦");
                }
            }

            // Document Requirements
            reqs.push("è¦‹ç©æ›¸ (å¿…é ˆ)");
            if (amount >= 500000) {
                reqs.push("ç›¸è¦‹ç©æ›¸ (å¿…é ˆ) ã¾ãŸã¯ç†ç”±æ›¸");
                resAlert.classList.remove('hidden');
                resAlert.innerText = "âš ï¸ 50ä¸‡å††ä»¥ä¸Šã®ãŸã‚ã€ç›¸è¦‹ç©ã‚‚ã‚Šã®å–å¾—ã€ã¾ãŸã¯å›°é›£ãªç†ç”±ã®è¨˜è¼‰ãŒå¿…é ˆã§ã™ã€‚";
            }
            if (category === 'vehicle') {
                 // Added above logic already, ensuring context
            }
            
            // Render
            resDocType.innerText = docType;
            resApprover.innerText = approver;
            
            reqs.forEach(req => {
                const li = document.createElement('li');
                li.innerText = req;
                resRequirements.appendChild(li);
            });
        }

        // --- Logic: Checklist ---
        function updateProgress() {
            const checks = document.querySelectorAll('.task-check');
            const checked = document.querySelectorAll('.task-check:checked');
            const countDisplay = document.getElementById('check-progress');
            const successMsg = document.getElementById('check-success');

            countDisplay.innerText = `${checked.length}/${checks.length} Completed`;

            if (checked.length === checks.length) {
                successMsg.classList.remove('hidden');
                // Simple confetti effect logic could go here
            } else {
                successMsg.classList.add('hidden');
            }
        }

        // --- Chart.js Implementations ---
        function initCharts() {
            // 1. Deadline Gauge
            const ctxDeadline = document.getElementById('deadlineChart').getContext('2d');
            const { diffDays } = initDeadline();
            const daysPassed = 30 - diffDays; // Approx
            
            new Chart(ctxDeadline, {
                type: 'doughnut',
                data: {
                    labels: ['çµŒéæ—¥æ•°', 'æ®‹ã‚Šæ—¥æ•°'],
                    datasets: [{
                        data: [daysPassed, diffDays],
                        backgroundColor: ['#E5E7EB', '#10B981'], // Gray, Emerald
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    }
                },
                plugins: [{
                    id: 'textCenter',
                    beforeDraw: function(chart) {
                        var width = chart.width,
                            height = chart.height,
                            ctx = chart.ctx;
            
                        ctx.restore();
                        var fontSize = (height / 114).toFixed(2);
                        ctx.font = "bold " + fontSize + "em sans-serif";
                        ctx.textBaseline = "middle";
                        ctx.fillStyle = "#1F2937";
            
                        var text = diffDays + "æ—¥",
                            textX = Math.round((width - ctx.measureText(text).width) / 2),
                            textY = height / 2;
            
                        ctx.fillText(text, textX, textY);
                        ctx.save();
                    }
                }]
            });

            // 2. Schedule Gantt (Horizontal Bar)
            const ctxSchedule = document.getElementById('scheduleChart').getContext('2d');
            
            // Current day marker plugin
            const todayLinePlugin = {
                id: 'todayLine',
                afterDatasetsDraw(chart) {
                    const { ctx, chartArea: { top, bottom }, scales: { x } } = chart;
                    const today = new Date().getDate();
                    if (today < 1 || today > 31) return;

                    const xPos = x.getPixelForValue(today);
                    
                    ctx.save();
                    ctx.beginPath();
                    ctx.strokeStyle = '#EF4444'; // Red line
                    ctx.lineWidth = 2;
                    ctx.moveTo(xPos, top);
                    ctx.lineTo(xPos, bottom);
                    ctx.stroke();
                    
                    // Label
                    ctx.fillStyle = '#EF4444';
                    ctx.textAlign = 'center';
                    ctx.fillText('ä»Šæ—¥', xPos, top - 5);
                    ctx.restore();
                }
            };

            new Chart(ctxSchedule, {
                type: 'bar',
                data: {
                    labels: ['æº–å‚™ãƒ»è¨˜è¼‰', 'X-Pointç”³è«‹', 'ä¼šè­°è³‡æ–™åŒ–', 'çµŒå–¶MTG'],
                    datasets: [{
                        label: 'æœŸé–“',
                        data: [
                            [1, 15], // 1st to 15th
                            [10, 15], // 10th to 15th
                            [16, 24], // 16th to 24th
                            [25, 26]  // 25th (approx)
                        ],
                        backgroundColor: [
                            'rgba(156, 163, 175, 0.5)', // Gray
                            'rgba(59, 130, 246, 0.5)',  // Blue
                            'rgba(245, 158, 11, 0.5)',  // Amber
                            'rgba(239, 68, 68, 0.8)'    // Red
                        ],
                        borderColor: [
                            'rgb(156, 163, 175)',
                            'rgb(59, 130, 246)',
                            'rgb(245, 158, 11)',
                            'rgb(239, 68, 68)'
                        ],
                        borderWidth: 1,
                        barPercentage: 0.6
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            min: 1,
                            max: 31,
                            title: { display: true, text: 'æ—¥ä»˜ (æ—¥)' },
                            grid: { color: '#F3F4F6' }
                        },
                        y: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const raw = context.raw;
                                    return `${raw[0]}æ—¥ ï½ ${raw[1]}æ—¥é ƒ`;
                                }
                            }
                        }
                    }
                },
                plugins: [todayLinePlugin]
            });
        }
    </script>
</body>
</html>
